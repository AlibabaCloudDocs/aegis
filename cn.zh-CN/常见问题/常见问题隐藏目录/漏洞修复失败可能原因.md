# 漏洞修复失败可能原因 {#concept_40490_zh .concept}

本文档列举了通过安骑士漏洞管理功能进行漏洞修复失败的可能原因，您可以参考以下原因进行排查。

**说明：** 由于可能导致漏洞修复失败的原因多种多样，例如服务器环境问题、修复补丁本身的兼容性问题、网络环境问题等原因都可能导致在您服务器上的漏洞修复失败。本文无法为您列出所有可能的情况，建议您在按照本文档列出的原因进行排查后，如果问题依然存在，请您尝试使用搜索引擎查找与此漏洞相关的更多信息进行针对性的分析、排查。

## Web-CMS漏洞修复失败可能原因 {#section_aql_f2c_3gb .section}

在您使用安骑士漏洞管理功能修复Web-CMS漏洞时，如果提示漏洞修复失败，请参考以下可能原因：

-   确认您的目标服务器上是否安装了安全狗或者其他类似安全防护软件，并且使用这类软件进行过目录权限优化或者相应的设置。目录权限优化设置可能会导致 system 账号对 www 目录及其子目录没有写权限，从而导致安骑士无法进行漏洞修复。

    请您确认您目标服务器上的 system 账号对 www 目录及其子目录具有读写权限。如果没有，请手动为 system 账号添加相应权限。

-   确认安骑士漏洞管理提示漏洞修复失败的相关文件是否被手动修改过或者之前通过手动方式升级更新过官方补丁。漏洞的相关文件变更可能会导致安骑士在进行安装匹配验证时发现该文件的 md5 值不一致，安骑士为了防止误改动您的文件，不会擅自修改该文件，从而停止漏洞修复并返回失败。

    如果您确认已在服务器上手动修复该漏洞，可通过安骑士的漏洞验证功能进行验证（提示文件已修改）。执行验证 24 小时后，如果该漏洞没有重新告警（显示未修复），说明您已成功修复该漏洞。

-   如果安骑士漏洞管理提示该漏洞文件已不存在，请您在服务器上根据漏洞说明中的文件路径查看该文件是否已经被删除。

    如果确认该漏洞文件已被删除，您可以忽略该漏洞告警。

-   检查您的服务器上的存储空间。如果服务器上的磁盘空间已满，会导致安骑士漏洞管理无法在您的服务器上下载相关补丁文件，导致漏洞修复失败。

    如果确认是磁盘空间不够的情况，请您增大服务器的存储空间或者清理服务器上已不需要的文件。确定目标服务器的存储空间够用后，重新修复该漏洞。


## 系统软件漏洞修复失败可能原因 { .section}

在您使用安骑士漏洞管理功能修复系统软件漏洞时，如果提示漏洞修复失败，请参考以下可能原因：

**说明：** 建议您参考[系统软件漏洞修复最佳实践](cn.zh-CN/常见问题/常见问题隐藏目录/服务器软件漏洞修复最佳实践.md#)方法对您服务器上的系统软件漏洞进行修复。

-   检查您的服务器上的存储空间，如果服务器上的磁盘空间已满，会导致安骑士漏洞管理无法在您的服务器上下载相关补丁文件，导致漏洞修复失败。

    如果确认是磁盘空间不够的情况，请您增大服务器的存储空间或者清理服务器上已不需要的文件。确定目标服务器的存储空间够用后，重新修复该漏洞。

-   根据您的服务器操作系统查看其它可能原因：
    -   **Windows 系统服务器** 
        -   **补丁安装包不存在**

            您的服务器可能未正确下载补丁安装文件，您可以尝试重新执行漏洞修复操作。

        -   **补丁安装包不匹配**

            安骑士漏洞管理发现当前补丁安装包与您的服务器系统不匹配，建议您在进一步确认该补丁安装包的详细信息后，如果该补丁确实与您的服务器系统不匹配，请您在安骑士漏洞管理中忽略该漏洞。

        -   **另外一个补丁正在安装**

            由于服务器不能同时运行两个补丁安装程序，建议您等当前补丁安装完成后尝试重新执行漏洞修复操作。

        -   **检查其他设置**
            -   检查 Windows Update 服务的Cryptographic Services服务是否正常运行。
            -   检查 Users 用户是否有对 C：\\Windows 目录的读取和执行权限。
            -   运行 Windows Update，查看其是否正常工作。
            -   [重置Windows更新组件](https://support.microsoft.com/zh-cn/help/971058/how-do-i-reset-windows-update-components)
            -   参考[Windows Update补丁更新失败排查](https://help.aliyun.com/knowledge_detail/41053.html)进行排查。
    -   **Linux 系统服务器** 

        您可以在[系统软件漏洞FAQ](cn.zh-CN/常见问题/常见问题隐藏目录/Linux软件漏洞FAQ.md#)中查看相关问题与解答。


